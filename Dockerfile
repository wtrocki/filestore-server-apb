FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGZoLXN5bmMtc2VydmVyLWFwYgpkZXNjcmlwdGlvbjogVGhlIEZl\
ZWRIZW5yeSBTeW5jIFNlcnZlciBBUEIKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAp0\
YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEZlZWRIZW5y\
eSBTeW5jIFNlcnZlcgogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogZm9udC1pY29u\
IGljb24tbm9kZWpzCiAgc2VydmljZU5hbWU6IGZoLXN5bmMtc2VydmVyCnBsYW5zOgogIC0gbmFt\
ZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IERlcGxveSBGSCBTeW5jLVNlcnZlcgogICAgZnJl\
ZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBNT05H\
T0RCX0FETUlOX1BBU1NXT1JECiAgICAgIGRlc2NyaXB0aW9uOiBQYXNzd29yZCBmb3IgdGhlIE1v\
bmdvREIgYWRtaW4gdXNlci4gVGhpcyB2YWx1ZSB3aWxsIGJlIGdlbmVyYXRlZCBpZiBub3Qgc3Bl\
Y2lmaWVkLgogICAgICBwYXR0ZXJuOiAiW2EtekEtWjAtOV17NDB9IgogICAgICB0eXBlOiBzdHJp\
bmcKICAgIC0gbmFtZTogTU9OR09EQl9VU0VSX05BTUUKICAgICAgZGVzY3JpcHRpb246IFVzZXJu\
YW1lIGZvciB0aGUgY3JlYXRlZCBNb25nb0RCIHVzZXIuCiAgICAgIGRlZmF1bHQ6ICJzeW5jLXVz\
ZXIiCiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1lOiBNT05HT0RCX1VTRVJfUEFTU1dPUkQK\
ICAgICAgZGVzY3JpcHRpb246IFBhc3N3b3JkIGZvciB0aGUgY3JlYXRlZCBNb25nb0RCIHVzZXIu\
IFRoaXMgdmFsdWUgd2lsbCBiZSBnZW5lcmF0ZWQgaWYgbm90IHNwZWNpZmllZC4KICAgICAgcGF0\
dGVybjogIlthLXpBLVowLTldezQwfSIKICAgICAgdHlwZTogc3RyaW5nCg=="


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
